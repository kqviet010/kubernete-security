ChÃ o báº¡n, tÃ´i sáº½ hÆ°á»›ng dáº«n báº¡n cÃ i Ä‘áº·t **Kubernetes Goat** (MÃ´i trÆ°á»ng thá»±c hÃ nh táº¥n cÃ´ng K8s) tá»« con sá»‘ 0 trÃªn mÃ¡y Ubuntu cá»§a báº¡n.

VÃ¬ báº¡n Ä‘Ã£ cÃ i Docker vÃ  Minikube á»Ÿ cÃ¡c bÆ°á»›c trÆ°á»›c, chÃºng ta sáº½ táº­n dá»¥ng láº¡i chÃºng. HÃ£y lÃ m theo Ä‘Ãºng trÃ¬nh tá»± nÃ y nhÃ©:

### Giai Ä‘oáº¡n 1: Chuáº©n bá»‹ mÃ´i trÆ°á»ng sáº¡ch

TrÆ°á»›c khi cÃ i má»™t "bÃ£i rÃ¡c lá»— há»•ng" nhÆ° K8s Goat, tá»‘t nháº¥t lÃ  nÃªn cÃ³ má»™t cá»¥m Minikube má»›i tinh Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t vá»›i cÃ¡c bÃ i táº­p cÅ© (nhÆ° Shopee Mini).

**1. Má»Ÿ Terminal vÃ  reset láº¡i Minikube:**

```bash
# XÃ³a cá»¥m cÅ© (náº¿u cÃ³)
minikube delete

# Khá»Ÿi táº¡o cá»¥m má»›i (dÃ¹ng driver docker cho á»•n Ä‘á»‹nh)
minikube start --driver=docker
```

*(Chá» khoáº£ng 2-3 phÃºt Ä‘á»ƒ nÃ³ táº£i vÃ  khá»Ÿi Ä‘á»™ng xong).*

**2. Äáº£m báº£o báº¡n cÃ³ git (Ä‘á»ƒ táº£i code):**

```bash
sudo apt update
sudo apt install git -y
```

-----

### Giai Ä‘oáº¡n 2: Táº£i vÃ  CÃ i Ä‘áº·t Kubernetes Goat

**1. Táº£i mÃ£ nguá»“n vá» mÃ¡y:**

```bash
# Di chuyá»ƒn ra Desktop hoáº·c thÆ° má»¥c lÃ m viá»‡c cá»§a báº¡n
cd ~

# Táº£i code tá»« GitHub
git clone https://github.com/madhuakula/kubernetes-goat.git

# Äi vÃ o thÆ° má»¥c vá»«a táº£i
cd kubernetes-goat
```

**2. Cháº¡y ká»‹ch báº£n cÃ i Ä‘áº·t tá»± Ä‘á»™ng:**
TÃ¡c giáº£ Ä‘Ã£ viáº¿t sáºµn script `setup-kubernetes-goat.sh`, nÃ³ sáº½ tá»± Ä‘á»™ng táº¡o cÃ¡c Pods, Services bá»‹ lá»—i cho báº¡n.

```bash
bash setup-kubernetes-goat.sh
```

**3. Kiá»ƒm tra quÃ¡ trÃ¬nh cÃ i Ä‘áº·t:**
Sau khi cháº¡y xong lá»‡nh trÃªn, báº¡n hÃ£y gÃµ lá»‡nh nÃ y Ä‘á»ƒ xem cÃ¡c "náº¡n nhÃ¢n" Ä‘Ã£ sá»‘ng dáº­y chÆ°a:

```bash
kubectl get pods
```

ğŸ‘‰ **Dáº¥u hiá»‡u thÃ nh cÃ´ng:** Báº¡n sáº½ tháº¥y má»™t danh sÃ¡ch dÃ i cÃ¡c Pods cÃ³ tráº¡ng thÃ¡i lÃ  `Running` hoáº·c `ContainerCreating`.
*VÃ­ dá»¥: `batch-check-job-xxxx`, `hidden-in-layers-xxxx`, `system-monitor-xxxx`...*

*(Náº¿u tháº¥y tráº¡ng thÃ¡i `ContainerCreating`, hÃ£y Ä‘á»£i thÃªm 1-2 phÃºt Ä‘á»ƒ nÃ³ táº£i image vá»).*

-----

### Giai Ä‘oáº¡n 3: Má»Ÿ Ä‘Æ°á»ng vÃ o Lab (Access)

Máº·c Ä‘á»‹nh cÃ¡c lá»— há»•ng nÃ y náº±m trong máº¡ng áº£o cá»§a Minikube, mÃ¡y Ubuntu cá»§a báº¡n chÆ°a truy cáº­p Ä‘Æ°á»£c. Báº¡n cáº§n má»Ÿ cá»•ng (Port Forward).

**1. Cháº¡y script má»Ÿ cá»•ng:**
Váº«n trong thÆ° má»¥c `kubernetes-goat`, báº¡n cháº¡y:

```bash
bash access-kubernetes-goat.sh
```

**âš ï¸ LÆ°u Ã½ quan trá»ng:**

  * Sau khi cháº¡y lá»‡nh nÃ y, **Terminal sáº½ bá»‹ treo** (nÃ³ Ä‘ang giá»¯ káº¿t ná»‘i). **Äá»ªNG Táº®T NÃ“**.
  * HÃ£y má»Ÿ má»™t tab Terminal má»›i (Ctrl+Shift+T) Ä‘á»ƒ gÃµ cÃ¡c lá»‡nh tiáº¿p theo.

-----

### Giai Ä‘oáº¡n 4: Kiá»ƒm tra káº¿t quáº£ (Sanity Check)

BÃ¢y giá» chÃºng ta sáº½ kiá»ƒm tra xem Lab Ä‘Ã£ thá»±c sá»± hoáº¡t Ä‘á»™ng chÆ°a báº±ng cÃ¡ch truy cáº­p vÃ o Dashboard hÆ°á»›ng dáº«n cá»§a K8s Goat.

1.  Má»Ÿ trÃ¬nh duyá»‡t Firefox trÃªn Ubuntu cá»§a báº¡n.
2.  Truy cáº­p Ä‘á»‹a chá»‰: `http://127.0.0.1:1234`

ğŸ‘‰ **ThÃ nh cÃ´ng:** Náº¿u báº¡n tháº¥y má»™t trang web mÃ u Ä‘en, cÃ³ logo con dÃª (Goat) vÃ  danh sÃ¡ch cÃ¡c bÃ i táº­p (Scenarios) nhÆ° hÃ¬nh dÆ°á»›i Ä‘Ã¢y, nghÄ©a lÃ  báº¡n Ä‘Ã£ cÃ i Ä‘áº·t thÃ nh cÃ´ng 100%\!

-----

### Giai Ä‘oáº¡n 5: Thá»±c hÃ nh thá»­ bÃ i Ä‘áº§u tiÃªn (Dá»… nháº¥t)

Äá»ƒ báº¡n cÃ³ cáº£m giÃ¡c "Hacker" ngay láº­p tá»©c, hÃ£y thá»­ bÃ i **"Sensitive Keys in Codebase"**.

**1. TÃ¬nh huá»‘ng:** Láº­p trÃ¬nh viÃªn lá»¡ tay push code chá»©a bÃ­ máº­t lÃªn Git.
**2. CÃ¡ch lÃ m:**

  * TrÃªn trang chá»§ `http://127.0.0.1:1234`, báº¥m vÃ o bÃ i "Sensitive Keys in Codebase".
  * NÃ³ sáº½ dáº«n báº¡n Ä‘áº¿n má»™t trang web giáº£ láº­p.
  * HÃ£y thá»­ dÃ¹ng cÃ´ng cá»¥ quÃ©t hoáº·c Ä‘Æ¡n giáº£n lÃ  soi mÃ£ nguá»“n/lá»‹ch sá»­ git (báº±ng cÃ¡ch thÃªm `/.git` vÃ o URL náº¿u cÃ³ thá»ƒ, hoáº·c dÃ¹ng tool `trufflehog` quÃ©t repo náº¿u bÃ i táº­p cung cáº¥p repo).

NhÆ°ng cÃ¡ch nhanh nháº¥t Ä‘á»ƒ kiá»ƒm tra trong mÃ´i trÆ°á»ng nÃ y lÃ  tÃ¬m cÃ¡c biáº¿n mÃ´i trÆ°á»ng trong Pod.

**TrÃªn Terminal má»›i, gÃµ:**

```bash
# Liá»‡t kÃª cÃ¡c pod Ä‘á»ƒ tÃ¬m tÃªn chÃ­nh xÃ¡c cá»§a pod bÃ i táº­p nÃ y
kubectl get pods

# Giáº£ sá»­ tÃªn pod lÃ  'build-code-xxxxx', hÃ£y thá»­ vÃ o trong nÃ³
kubectl exec -it <tÃªn-pod-cá»§a-báº¡n> -- /bin/bash

# Khi Ä‘Ã£ vÃ o trong, thá»­ tÃ¬m file nháº¡y cáº£m
ls -la
env
```

Báº¡n hÃ£y cÃ i Ä‘áº·t xong vÃ  bÃ¡o tÃ´i biáº¿t náº¿u tháº¥y trang Dashboard con dÃª nhÃ©\!
