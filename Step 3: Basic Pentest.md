# Hướng dẫn Pentest Kubernetes Goat: SSRF & Docker Escape

**Môi trường kết nối:**
`Kali (Attacker)` --> `Ubuntu (Server)` --> `Kubernetes Goat (Victim)`

Tài liệu này hướng dẫn khai thác 2 lỗ hổng kinh điển và thú vị nhất trong môi trường Kubernetes: **SSRF** và **Docker Escape**.

---

## Kịch bản 1: SSRF (Server Side Request Forgery)

**Mục tiêu:** Lợi dụng ứng dụng web bị lỗi để đọc file mật của hệ thống hoặc quét mạng nội bộ K8s mà người ngoài không thấy được.

### Bước 1: Truy cập vào bài tập
1. Trên máy Kali, mở Firefox truy cập: `http://<IP_UBUNTU>:1234`
2. Chọn bài: **"Internal Proxy"** (hoặc SSRF).

### Bước 2: Phân tích
Ứng dụng này có một ô nhập liệu để kiểm tra URL.
* **Cơ chế:** Nếu bạn nhập `https://google.com` -> Server K8s sẽ đi ra Google lấy dữ liệu về hiển thị cho bạn.
* **Tư duy Hacker:** *"Nếu mình bảo nó đi lấy dữ liệu từ chính nó (localhost) hoặc file hệ thống thì sao?"*

### Bước 3: Khai thác (Exploit) từ Kali
Mở Terminal Kali và dùng `curl` để gửi payload độc hại:

#### A. Đọc file mật `/etc/passwd`

```bash
# Thay IP_UBUNTU bằng IP thật
curl "http://<IP_UBUNTU>:1234/internal-proxy?url=file:///etc/passwd"
